<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TuneTwins</title>
<style>
  body { margin: 0; font-family: Arial, sans-serif; background-color: #121212; color: #f5f5f5; }
  header { display: flex; justify-content: space-between; align-items: center; background-color: #1e1e1e; padding: 15px 30px; box-shadow: 0 2px 6px rgba(0,0,0,0.5); }
  header h1 { margin: 0; font-size: 1.8em; color: #ff4d4d; cursor: pointer; }
  .search-bar input { padding: 8px 12px; border-radius: 20px; border: none; outline: none; font-size: 1em; width: 250px; display: inline-block; }
  main { padding: 30px; }
  .results { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px; }
  .card { background-color: #1e1e1e; border-radius: 12px; padding: 15px; text-align: center; box-shadow: 0 2px 6px rgba(0,0,0,0.4); transition: transform 0.2s, box-shadow 0.2s; cursor: pointer; }
  .card:hover { transform: scale(1.05); box-shadow: 0 6px 15px rgba(255,77,77,0.5); }
  .card img { width: 100%; border-radius: 8px; margin-bottom: 10px; }
  .card h2, .card h4 { margin: 5px 0; color: #ff4d4d; font-size: 1em; }
  .card p { font-size: 0.8em; color: #bbb; margin: 0; }
  #homeGrid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 20px; margin-top: 20px; }
  #albumDetail { display: none; margin-top: 20px; }
  #albumDetail img { width: 200px; margin-bottom: 15px; }
  #albumDetail p { color: #ccc; }
  #albumDetail h2 { margin-bottom: 5px; }
  #backButton { padding: 10px 25px; font-size: 1em; border: none; border-radius: 20px; background-color: #ff4d4d; color: white; cursor: pointer; margin-bottom: 20px; transition: transform 0.2s, background-color 0.2s; }
  #backButton:hover { transform: scale(1.05); background-color: #ff1a1a; }
  #suggestions { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-top: 15px; }
</style>
</head>
<body>

<header>
  <h1>TuneTwins</h1>
  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="Tape un album...">
  </div>
</header>

<main>
  <!-- Accueil avec 100 albums -->
  <div id="homeGrid"></div>

  <!-- RÃ©sultats recherche -->
  <div id="results" class="results"></div>

  <!-- Page dÃ©tail album -->
  <div id="albumDetail">
    <button id="backButton">Retour</button>
    <div id="detailContent"></div>
    <h3>Suggestions :</h3>
    <div id="suggestions"></div>
  </div>
</main>

<script>
const API_KEY = "5b1323314739dda875e73203dea82579";
const homeGrid = document.getElementById("homeGrid");
const resultsDiv = document.getElementById("results");
const searchInput = document.getElementById("searchInput");
const logo = document.querySelector("header h1");
const albumDetail = document.getElementById("albumDetail");
const detailContent = document.getElementById("detailContent");
const suggestionsDiv = document.getElementById("suggestions");
const backButton = document.getElementById("backButton");

// Exemple de 100 albums (je nâ€™en mets que 10 ici pour pas alourdir, tu peux dupliquer/ajouter)
const featuredAlbums = [
  { artist: "Daft Punk", name: "Random Access Memories", image: "https://upload.wikimedia.org/wikipedia/en/2/26/Daft_Punk_-_Random_Access_Memories.png" },
  { artist: "Kendrick Lamar", name: "To Pimp a Butterfly", image: "https://upload.wikimedia.org/wikipedia/en/thumb/f/f6/Kendrick_Lamar_-_To_Pimp_a_Butterfly.png/250px-Kendrick_Lamar_-_To_Pimp_a_Butterfly.png" },
  { artist: "Adele", name: "25", image: "https://upload.wikimedia.org/wikipedia/en/9/96/Adele_-_25_%28Official_Album_Cover%29.png" },
  { artist: "Billie Eilish", name: "Happier Than Ever", image: "https://static.fnac-static.com/multimedia/Images/FR/NR/15/a8/bf/12560405/1520-1/tsp20210428112156/Happier-Than-Ever-Edition-Limitee-Exclusivite-Fnac.jpg" },
  { artist: "Tame Impala", name: "Currents", image: "https://upload.wikimedia.org/wikipedia/en/9/9b/Tame_Impala_-_Currents.png" },
  { artist: "Pink Floyd", name: "The Dark Side of the Moon", image: "https://upload.wikimedia.org/wikipedia/en/3/3b/Dark_Side_of_the_Moon.png" },
  { artist: "Radiohead", name: "OK Computer", image: "https://upload.wikimedia.org/wikipedia/en/b/ba/Radioheadokcomputer.png" },
  { artist: "The Beatles", name: "Abbey Road", image: "https://upload.wikimedia.org/wikipedia/en/4/42/Beatles_-_Abbey_Road.jpg" },
  { artist: "Kanye West", name: "My Beautiful Dark Twisted Fantasy", image: "https://upload.wikimedia.org/wikipedia/en/f/f0/My_Beautiful_Dark_Twisted_Fantasy.jpg" },
  { artist: "The Weeknd", name: "After Hours", image: "https://upload.wikimedia.org/wikipedia/en/c/c1/The_Weeknd_-_After_Hours.png" },
  { artist: "The Strokes", name: "The New Abnormal", image: "https://upload.wikimedia.org/wikipedia/en/f/f8/The_Strokes_-_The_New_Abnormal.png" },
  { artist: "Nirvana", name: "Nevermind", image: " https://upload.wikimedia.org/wikipedia/en/b/b7/NirvanaNevermindalbumcover.jpg" },
  { artist: "Fleetwood Mac", name: "Rumours", image: "  https://upload.wikimedia.org/wikipedia/en/f/fb/FMacRumours.PNG" },
  { artist: "Frank Ocean", name: "Blonde", image: " https://upload.wikimedia.org/wikipedia/en/a/a0/Blonde_-_Frank_Ocean.jpeg" },
  { artist: "Tyler The Creator", name: "Igor", image: "https://upload.wikimedia.org/wikipedia/en/5/51/Igor_-_Tyler%2C_the_Creator.jpg" },
  { artist: "Sting", name: "The Very Best Of Sting And The Police", image: "https://upload.wikimedia.org/wikipedia/en/2/2e/Stingbestof.jpg" },
  { artist: "Led Zeppelin", name: "Led Zeppelin IV", image: "https://upload.wikimedia.org/wikipedia/en/2/26/Led_Zeppelin_-_Led_Zeppelin_IV.jpg" },
  { artist: "Queen", name: "A Night at the Opera", image: "https://upload.wikimedia.org/wikipedia/en/4/4d/Queen_A_Night_At_The_Opera.png" },
  { artist: "David Bowie", name: "The Rise and Fall of Ziggy Stardust and the Spiders from Mars", image: "https://upload.wikimedia.org/wikipedia/en/0/01/ZiggyStardust.jpg" },
  { artist: "The Clash", name: "London Calling", image: "https://upload.wikimedia.org/wikipedia/en/0/00/TheClashLondonCallingalbumcover.jpg" },
  { artist: "The Cure", name: "Disintegration", image: "https://upload.wikimedia.org/wikipedia/en/b/b8/CureDisintegration.jpg" },
  { artist: "Joy Division", name: "Unknown Pleasures", image: "https://upload.wikimedia.org/wikipedia/en/5/5a/UnknownPleasuresVinyl.jpg" },
  { artist: "The Smiths", name: "The Queen Is Dead", image: "https://upload.wikimedia.org/wikipedia/en/e/ed/The-Queen-is-Dead-cover.png" },
  { artist: "Amy Winehouse", name: "Back to Black", image: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/Amy_Winehouse_-_Back_To_Black_%28Deluxe_Edition%29.jpg/500px-Amy_Winehouse_-_Back_To_Black_%28Deluxe_Edition%29.jpg" },
  { artist: "Adele", name: "21", image: "https://upload.wikimedia.org/wikipedia/en/1/1b/Adele_-_21.png" },
  { artist: "Lana Del Rey", name: "Born to Die", image: "https://upload.wikimedia.org/wikipedia/en/2/29/BornToDieAlbumCover.png" },
  { artist: "Kanye West", name: "Graduation", image: "https://upload.wikimedia.org/wikipedia/en/7/70/Graduation_%28album%29.jpg" },
  { artist: "Outkast", name: "Stankonia", image: "https://upload.wikimedia.org/wikipedia/en/0/0b/OutKast_-_Stankonia.JPG" },
  { artist: "Lauryn Hill", name: "The Miseducation of Lauryn Hill", image: "https://upload.wikimedia.org/wikipedia/en/9/99/The_Miseducation_of_Lauryn_Hill.png" },
  { artist: "Jay-Z", name: "The Blueprint", image: "https://upload.wikimedia.org/wikipedia/en/2/2c/The_Blueprint.png" },


  // ðŸ‘‰ tu peux ajouter jusqu'Ã  100 albums ici
];

// Affichage page dâ€™accueil
function displayHomeAlbums() {
  homeGrid.innerHTML = "";
  albumDetail.style.display = "none";
  resultsDiv.style.display = "none";
  homeGrid.style.display = "grid";

  featuredAlbums.forEach(album => {
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `<img src="${album.image}" alt="${album.name}"><h4>${album.name}</h4><p>${album.artist}</p>`;
    card.onclick = () => showAlbumDetail(album.artist, album.name, album.image);
    homeGrid.appendChild(card);
  });
}

// Recherche album
async function searchAlbum(albumName) {
  const url = `https://ws.audioscrobbler.com/2.0/?method=album.search&album=${encodeURIComponent(albumName)}&api_key=${API_KEY}&format=json`;
  const response = await fetch(url);
  const data = await response.json();

  const albums = data.results.albummatches.album
    .filter(a => a.image && a.image[3] && a.image[3]["#text"]) // garde seulement ceux avec image
    .slice(0, 3); // max 3 rÃ©sultats
  return albums;
}

// Albums similaires
async function getSimilarAlbums(artist, album) {
  const url = `https://ws.audioscrobbler.com/2.0/?method=album.getinfo&api_key=${API_KEY}&artist=${encodeURIComponent(artist)}&album=${encodeURIComponent(album)}&format=json`;
  const response = await fetch(url);
  const data = await response.json();
  if (data.album && data.album.tags && data.album.tags.tag.length > 0) {
    const mainTag = data.album.tags.tag[0].name;
    return searchByTag(mainTag);
  }
  return [];
}

async function searchByTag(tag) {
  const url = `https://ws.audioscrobbler.com/2.0/?method=tag.gettopalbums&tag=${encodeURIComponent(tag)}&api_key=${API_KEY}&format=json`;
  const response = await fetch(url);
  const data = await response.json();
  return data.albums.album.slice(0, 5);
}

// Affichage rÃ©sultats recherche
function displayAlbums(albums) {
  homeGrid.style.display = "none";
  resultsDiv.style.display = "grid";
  albumDetail.style.display = "none";
  resultsDiv.innerHTML = "";

  albums.forEach(album => {
    const card = document.createElement("div");
    card.className = "card";
    const image = album.image?.[3]?.["#text"] || "https://via.placeholder.com/200x200";
    card.innerHTML = `<img src="${image}" alt="${album.name}"><h4>${album.name}</h4><p>${album.artist?.name || album.artist}</p>`;
    card.onclick = () => showAlbumDetail(album.artist?.name || album.artist, album.name, image);
    resultsDiv.appendChild(card);
  });
}

// Affichage dÃ©tail album
async function showAlbumDetail(artist, albumName, imageUrl) {
  homeGrid.style.display = "none";
  resultsDiv.style.display = "none";
  albumDetail.style.display = "block";

  detailContent.innerHTML = `<img src="${imageUrl}" alt="${albumName}"><h2>${albumName}</h2><p><strong>${artist}</strong></p><p>Chargement description...</p>`;
  suggestionsDiv.innerHTML = "";

  const url = `https://ws.audioscrobbler.com/2.0/?method=album.getinfo&api_key=${API_KEY}&artist=${encodeURIComponent(artist)}&album=${encodeURIComponent(albumName)}&format=json`;
  const response = await fetch(url);
  const data = await response.json();

  if (data.album?.wiki?.summary) {
    detailContent.querySelector("p:last-child").innerHTML = data.album.wiki.summary;
  } else {
    detailContent.querySelector("p:last-child").innerHTML = "Pas de description disponible.";
  }

  const suggestions = await getSimilarAlbums(artist, albumName);
  suggestions.forEach(sugg => {
    const sCard = document.createElement("div");
    sCard.className = "card";
    const sImage = sugg.image?.[3]?.["#text"] || "https://via.placeholder.com/200x200";
    sCard.innerHTML = `<img src="${sImage}" alt="${sugg.name}"><h4>${sugg.name}</h4><p>${sugg.artist.name}</p>`;
    sCard.onclick = () => showAlbumDetail(sugg.artist.name, sugg.name, sImage);
    suggestionsDiv.appendChild(sCard);
  });
}

// Bouton retour
backButton.onclick = () => {
  albumDetail.style.display = "none";
  displayHomeAlbums();
};

// Recherche live
searchInput.addEventListener("keyup", async (e) => {
  const query = e.target.value.trim();
  if (query.length > 2) {
    const albums = await searchAlbum(query);
    displayAlbums(albums);
  } else {
    displayHomeAlbums();
  }
});

// Logo â†’ retour accueil
logo.onclick = () => {
  searchInput.value = "";
  displayHomeAlbums();
};

// Lancer lâ€™accueil au chargement
displayHomeAlbums();
</script>

</body>
</html>


